<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weather App</title>

<style>
body, html{
  margin: 0;
  height: 100vh;
}

.container{  
  background-color: aquamarine;
  max-width: 700px;
  margin: auto;
  box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 12px;
  justify-content: center; /*centers horizontally*/
  align-items: center; /*centers*/
  padding: 12px;
  place-items: center;
  margin-top: 150px;
}

.searchBtn{
  border-radius: 5px;
  background-color: rgb(154, 208, 255);
  cursor: pointer;
}

.searchBtn:hover{
  text-decoration: underline;
  text-decoration: solid;
}

#cityInput{
  border-radius: 5px;
  align-items: center;
  justify-content: center;
  place-items: center;
}

</style>

</head>
<body>

<h2 class="h2">Check Weather</h2>

<div class="container">
  <input type="text" id="cityInput"  placeholder ="City...">
<button class="searchBtn">Search</button>

<div id="result"></div>
<div id="error" style="display: none;"></div>    

</div>

  <script>
const cityInput = document.querySelector("#cityInput");
const searchBtn = document.querySelector(".searchBtn");
const result = document.querySelector("#result");
const error = document.querySelector("#error");

const apiKey = '53916936a41da74bef7210102adb4b0b';  //get api key

searchBtn.addEventListener("click", function(){
const cityName = cityInput.value; // cityname = what is put in the input.
console.log("The user entered:", cityName);

const url = (`https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${apiKey}&units=metric`);
console.log('The url is', url)


fetch(url)
.then(response=>{

  if(response.ok){
  return response.json()
  }

  if(!response.ok){
    error.textContent = "City not found";
    error.style.display = "block";
    result.style.display = "none"; 
    throw new Error("City not found");

  }

})

.then(data =>{

error.style.display = "none";// hide city error messages when city name is valid

  console.log(data);


const temperature = data.main.temp;
const city = data.name;
const description = data.weather[0].description;

result.textContent = `${city}: ${temperature}Â°C,  ${description}`; // placed  in result div..
result.style.display = "block"; //makes the result div visible on the page.

cityInput.value = "";
})

.catch(error=> console.log(error));

});
    
  </script>
</body>
</html>
